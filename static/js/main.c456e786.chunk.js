(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a,r,c,o=n(1),l=n(0),u=n.n(l),i=n(13),m=n.n(i),s=n(49),d=n.n(s),p=n(7),j=n(23),b=n.n(j),f=n(50),E=n(3),v=n(24),y=n.n(v),O=n(25),h=n.n(O),g=n(2),P=n.n(g),S=n(8),w=n.n(S),C=["imageCollection","prose","motion"],k=["moodBoard","storyBoard","styleFrames"],N=(a={},Object(E.a)(a,"prose","prose"),Object(E.a)(a,"motion","motion"),Object(E.a)(a,"imageCollection",["moodBoard","storyBoard","styleFrames"]),a),I=(r={},Object(E.a)(r,"imageCollection","Image collection"),Object(E.a)(r,"prose","Script"),Object(E.a)(r,"motion","Animation"),r),x=(c={},Object(E.a)(c,"moodBoard","Mood board"),Object(E.a)(c,"storyBoard","Story board"),Object(E.a)(c,"styleFrames","Style frames"),c),A=P.a.oneOf(C),B=P.a.oneOf(k),L=P.a.shape({id:P.a.string,name:P.a.string,type:A.isRequired,subtype:B}),D=(P.a.shape({name:P.a.string,sections:P.a.arrayOf(L)}),{overviewLink:"Overview"}),R=[{id:w()("Script"),name:"Script",type:"prose"},{id:w()("Mood board"),name:"Mood board",type:"imageCollection",subtype:"moodBoard"},{id:w()("Story board"),name:"Story board",type:"imageCollection",subtype:"storyBoard"},{id:w()("Style frames"),name:"Style frames",type:"imageCollection",subtype:"styleFrames"},{id:w()("Animation"),name:"Animation",type:"motion"}];var _,M=(_="projects","".concat("anni-pma-").concat(_)),T=[],F=function(){var e=Object(f.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.getItem(M);case 3:if(t=e.sent){e.next=8;break}return e.next=7,h.a.setItem(M,T);case 7:return e.abrupt("return",T);case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}();function J(e){if(e)return h.a.setItem(M,e)}var H=d()({clientId:"swbiv6r9kwfs4os"}),U=(H.DropboxContext,H.DropboxProvider),W=H.useDropboxClient;function q(e){var t=e.children;return u.a.createElement(U,null,t)}n(141);var G=n(10),V=n(5),$=function(e){var t="/project-manager-application";return"/"===e?"".concat(t,"/"):"".concat(t,"/").concat(e,"/")},z={projectNameLabel:"Project name",projectNamePlaceholder:"Project B",noProjects:"No projects",createProject:"Create project",removeProject:"Remove project",removeProjectAriaLabel:"Remove {name} project",errorProjectNameTaken:"Sorry, that project name is already taken."},K=function(e){return z.removeProjectAriaLabel.replace(/\{.*?\}/,e)};function Q(e){var t=e.id,n=e.name,a=e.removeProject;return u.a.createElement("div",null,u.a.createElement("h3",null,u.a.createElement(V.a,{to:$(t)},n)),u.a.createElement("button",{"aria-label":K(n),onClick:function(){return a(n)}},z.removeProject))}var X="projectNameErrorId";function Y(e){var t=e.addProject,n=e.validateProject,a=Object(l.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],m=Object(l.useState)(null),s=Object(o.a)(m,2),d=s[0],p=s[1];return u.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),c){var a,r=(a=c,{id:w()(a),name:a,sections:R}),o=n(r);null===o?(t(r),i("")):p(o)}}},u.a.createElement("label",{htmlFor:"projectName"},z.projectNameLabel,u.a.createElement("input",{"aria-describedby":d&&X,"aria-invalid":!!d||null,id:"projectName",type:"text",className:"input",placeholder:z.projectNamePlaceholder,value:c,onChange:function(e){p(null),i(e.target.value)}})),d&&u.a.createElement("p",{style:{color:"magenta"},id:X},d.message),u.a.createElement("button",{type:"submit"},z.createProject))}function Z(e){var t=e.projects,n=e.setProjects,a=function(e){return n(t.filter(function(t){return t.name!==e}))};return u.a.createElement("div",null,u.a.createElement("h2",null,"Projects"),0===t.length&&u.a.createElement("p",null,z.noProjects),t.map(function(e){return u.a.createElement(Q,Object.assign({},e,{key:e.name,removeProject:a}))}),u.a.createElement(Y,{addProject:function(e){return n([].concat(Object(G.a)(t),[e]))},validateProject:function(e){var n=e.name;return t.find(function(e){return e.name===n})?{message:z.errorProjectNameTaken}:null}}))}var ee=n(52),te="PROJECT_SECTION",ne="PROJECT_SECTION_NAV",ae="404 - Page not found",re=function(){return u.a.createElement("div",null,u.a.createElement("h1",null,ae))};function ce(e){var t=e.name,n=e.project,a=e.subtype,r=e.type;return u.a.createElement("div",{"data-testid":te},u.a.createElement("h1",null,n.name," - ",t),r,a&&" - ".concat(a))}function oe(e){var t=e.project;return u.a.createElement("div",{"data-testid":te},u.a.createElement("h1",null,t.name),u.a.createElement("p",null,t.details))}var le=n(28),ue=n(53),ie=n.n(ue),me=n(14),se=Object(me.SortableHandle)(function(){return u.a.createElement("span",null,"::")}),de=Object(me.SortableElement)(function(e){var t=e.renderItem,n=void 0===t?function(){return"feed me"}:t,a=e.value;return u.a.createElement("li",null,u.a.createElement(se,null),"string"===typeof a?a:n(a))}),pe=Object(me.SortableContainer)(function(e){var t=e.items,n=Object(le.a)(e,["items"]);return u.a.createElement("ul",null,t.map(function(e,t){return u.a.createElement(de,Object.assign({key:"item-".concat(t),index:t,value:e},n))}))}),je=["Item 1","Item 2","Item 3","Item 4","Item 5","Item 6"];function be(e){var t=e.defaultItems,n=void 0===t?je:t,a=e.onReorder,r=void 0===a?function(){return null}:a,c=Object(le.a)(e,["defaultItems","onReorder"]),i=Object(l.useState)(n),m=Object(o.a)(i,2),s=m[0],d=m[1];Object(l.useEffect)(function(){var e=ie()(n,s);e.length>0&&d([].concat(Object(G.a)(s),Object(G.a)(e)))});return u.a.createElement(pe,Object.assign({},c,{items:s,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex,a=Object(me.arrayMove)(s,t,n);r(a),d(a)},useDragHandle:!0}))}var fe={newProjectSectionNameLabel:"New project section name",newProjectSectionNamePlaceholder:"Section name",saveNewProjectSectionButtonLabel:"Add new project section"},Ee="type",ve="subtype",ye={name:"",type:"imageCollection",subtype:"moodBoard"},Oe=function(e,t){return e===t.type},he=function(e,t){return e===t.subtype},ge=function(e,t){return Object(p.a)({},e,t)};function Pe(e){var t=e.saveNewSection,n=Object(l.useReducer)(ge,ye),a=Object(o.a)(n,2),r=a[0],c=a[1],i=function(e){return c({subtype:e})};return u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(Object(p.a)({},r,{id:w()(r.name)})),c(ye)}},u.a.createElement("label",null,fe.newProjectSectionNameLabel,u.a.createElement("input",{value:r.name,onChange:function(e){var t,n=e.target;return t=n.value,c({name:t})},name:"newProjectSectionName",placeholder:fe.newProjectSectionNamePlaceholder})),u.a.createElement("ul",null,Object.entries(N).map(function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return u.a.createElement("li",{key:n},u.a.createElement("label",null,u.a.createElement("input",{checked:Oe(n,r),type:"radio",name:Ee,onChange:function(){return function(e){c({type:e}),i(Array.isArray(N[e])?N[e][0]:null)}(n)},value:n}),I[n]),Oe(n,r)&&Array.isArray(a)&&u.a.createElement("ul",null,a.map(function(e){return u.a.createElement("li",{key:e},u.a.createElement("label",null,u.a.createElement("input",{checked:he(e,r),type:"radio",name:ve,onChange:function(){return i(e)},value:n}),x[e]))})))})),u.a.createElement("button",{type:"submit"},fe.saveNewProjectSectionButtonLabel))}var Se={cancel:"Cancel",saveChanges:"Save Changes"};function we(e){var t=e.project,n=e.updateProject,a=e.toggleEditing,r=Object(l.useState)(t),c=Object(o.a)(r,2),i=c[0],m=c[1],s=i.sections;return u.a.createElement("div",null,u.a.createElement(be,{defaultItems:s,onReorder:function(e){return m(Object(p.a)({},t,{sections:e}))},renderItem:function(e){var t=e.name;return u.a.createElement("strong",null,t)}}),u.a.createElement(Pe,{project:i,saveNewSection:function(e){m({id:t.id,sections:[].concat(Object(G.a)(s),[e])})}}),u.a.createElement("button",{onClick:function(){n(i),a()}},Se.saveChanges),u.a.createElement("button",{onClick:a},Se.cancel))}var Ce=Object(ee.a)(function(e){return e.projects},function(e){return e.projectId},function(e,t){return e.find(function(e){return e.id===t})});function ke(e){var t=Object(l.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],c=Ce(e),i=e.updateProject;if(!c)return u.a.createElement(re,null);var m=u.a.createElement("ul",{"data-testid":ne},u.a.createElement("li",null,u.a.createElement(V.a,{to:"./"},D.overviewLink)),c.sections.map(function(e,t){var n=e.id,a=e.name;return u.a.createElement("li",{key:n},u.a.createElement(V.a,{to:n},a))}),u.a.createElement("li",null,u.a.createElement("button",{onClick:function(){return r(!0)}},"Edit project sections"))),s=u.a.createElement(we,{project:c,toggleEditing:function(){return r(!1)},updateProject:i});return u.a.createElement("div",null,u.a.createElement(V.b,null,u.a.createElement(oe,{default:!0,project:c}),c.sections.map(function(e,t){return u.a.createElement(ce,Object.assign({key:e.id,path:e.id,project:c},e))})),a?s:m)}ke.defaultProps={updateProject:function(){return null}};var Ne,Ie="abce".split("").map(function(e){return{id:"project-".concat(e),name:"Project ".concat(e.toUpperCase()),details:"Details about project ".concat(e.toUpperCase()),sections:R}}),xe=function(){return u.a.createElement("div",null,"Loading...")},Ae=(n(170),function(){return u.a.createElement("div",null,"Home")});function Be(){var e=W(),t=e.client,n=e.authUrl,a=e.logout,r=Object(l.useState)(null),c=Object(o.a)(r,2),i=c[0],m=c[1];return Object(l.useEffect)(function(){t&&t.usersGetCurrentAccount().then(m)},[]),t?i?u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("h2",null,i.name.familiar_name),u.a.createElement("img",{style:{borderRadius:"50%"},with:50,height:50,src:i.profile_photo_url,alt:i.name.display_name}),u.a.createElement("button",{onClick:a},"Logout"))):u.a.createElement(xe,null):u.a.createElement("a",{href:n},"Login to Dropbox")}function Le(e){var t=e.defaultProjects,n=void 0===t?Ie:t,a=Object(l.useState)(!1),r=Object(o.a)(a,2),c=r[0],i=r[1],m=W().updateDatabase;Ne=n;var s=Object(l.useState)(n),d=Object(o.a)(s,2),j=d[0],b=d[1];return Object(l.useEffect)(function(){y()(Ne,j)||(J(j),m({data:{projects:j}}),Ne=j)}),u.a.createElement("div",{className:"App"},u.a.createElement("header",null,"Anni Project Manager Application",u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement(V.a,{to:$("/")},"Home")),u.a.createElement("li",null,u.a.createElement(V.a,{to:$("dashboard")},"Dashboard")),u.a.createElement("li",null,u.a.createElement(Be,null)))),u.a.createElement(V.b,null,u.a.createElement(Ae,{path:$("/")}),u.a.createElement(Z,{path:$("dashboard"),projects:j,setProjects:b}),u.a.createElement(ke,{path:$(":projectId/*"),projects:j,updateProject:function(e){b(j.map(function(t){return t.id===e.id?Object(p.a)({},t,e):t}))}}),u.a.createElement(re,{default:!0})),u.a.createElement("footer",{style:{padding:"100px 20px",background:"MintCream",float:"right"}},u.a.createElement("button",{onClick:function(){return i(!c)}},"Debug State"),c&&u.a.createElement("pre",{style:{background:"lavender",padding:10}},JSON.stringify(j,null,2))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=document.getElementById("root");function Re(e){var t=e.children;return u.a.createElement("div",{className:"PresentationPanel"},t)}function _e(){var e=W().authUrl;return u.a.createElement(Re,null,u.a.createElement("div",null,u.a.createElement("h1",null,"Anni"),u.a.createElement("a",{href:e},"Login with Dropbox")))}m.a.render(u.a.createElement(q,null,u.a.createElement(function(){var e=W(),t=e.client,n=e.readDatabase,a=Object(l.useState)(null),r=Object(o.a)(a,2),c=r[0],i=r[1];return Object(l.useEffect)(function(){t&&n().then(function(e){e?i(e.projects):F().then(i)})}),t?c?u.a.createElement(q,null,u.a.createElement(Le,{defaultProjects:c})):u.a.createElement(Re,null,u.a.createElement(xe,null)):u.a.createElement(_e,null)},null)),De),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},54:function(e,t,n){e.exports=n(171)}},[[54,1,2]]]);
//# sourceMappingURL=main.c456e786.chunk.js.map