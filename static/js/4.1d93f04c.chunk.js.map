{"version":3,"sources":["../node_modules/lodash/throttle.js","../node_modules/lodash/debounce.js","../node_modules/lodash/now.js","../node_modules/lodash/toNumber.js","../node_modules/canvas-image-scrubber/es/AudioTrack.js","../node_modules/canvas-image-scrubber/es/index.js","project/sections/Animation/AnimationSection.js"],"names":["debounce","__webpack_require__","isObject","FUNC_ERROR_TEXT","module","exports","func","wait","options","leading","trailing","TypeError","maxWait","now","toNumber","nativeMax","Math","max","nativeMin","min","lastArgs","lastThis","result","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","timeWaiting","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","cancel","clearTimeout","flush","root","Date","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","value","other","valueOf","replace","isBinary","test","slice","_class","_temp","_extends","Object","assign","target","i","length","source","key","prototype","hasOwnProperty","call","AudioTrack_AudioTrack","_Component","AudioTrack","props","instance","Constructor","_classCallCheck","_this","self","ReferenceError","_possibleConstructorReturn","pauseAudio","audio","pause","registerAudio","state","currentTime","isReady","volume","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","componentDidMount","_this2","addEventListener","setState","onReady","componentWillReceiveProps","_ref","_this3","playing","playAudio","muted","throttle_default","play","paused","render","_props","src","showControls","trackProps","react_default","a","createElement","controls","ref","kind","react","defaultProps","propTypes","es_class","es_temp","_initialiseProps","es_extends","_createClass","defineProperties","descriptor","defineProperty","protoProps","staticProps","es_Viewer","Viewer","es_classCallCheck","es_possibleConstructorReturn","frames","audioReady","currentFrame","fps","loading","isPlaying","htmlImageElements","loadingProgress","loadingComplete","totalLoaded","totalFramesToLoad","window","onkeydown","handleKeydown","es_inherits","canvas","ctx","getContext","forEach","frame","index","callback","img","Image","onload","preloadImage","framesSize","width","height","splice","drawFrame","componentWillUnmount","getNextFrame","getPrevFrame","currentAudioPosition","audioSource","renderAudio","onAudioReady","maxTime","getViewerProgressProps","getViewerControlsProps","getCanvasRef","el","renderViewer","get","_state","_this4","onVolumeChange","togglePlay","toggleAudio","_ref2","isLoading","next","goToNextFrame","prev","goToPrevFrame","onFPSChange","fpsChange","onChange","goToFrame","_state2","drawImage","renderNextFrame","renderFrame","then","performance","delta","nextFrame","interval","round","requestAnimationFrame","e","which","preventDefault","FolderPicker","onSelectFolder","selectedFolderId","_useState","useState","_useState2","slicedToArray","folders","setFolders","client","useDropboxClient","useEffect","_listFiles","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","filesListFolder","path","sent","entries","filter","name","stop","listFiles","Loader","find","f","id","map","_ref3","reducer","nextState","objectSpread","AnimationSection","_ref5","save","defaultSelectedFolder","selectedFolder","defaultFiles","files","defaultSettings","objectWithoutProperties","_useState5","_useState6","isSaveDisabled","setIsSaveDisabled","_useReducer","useReducer","_useReducer2","settings","updateSettings","folder","onReceiveFolderFiles","_useState3","_useState4","setItems","_listFiles2","_callee3","sortedFiles","_context3","path_display","Promise","all","_ref4","_callee2","file","_context2","sharingCreateSharedLink","abrupt","exec","url","_x","sort","b","useListFolderFiles","isEqual","Array","isArray","_ref6","disabled","onClick","title"],"mappings":"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","file":"static/js/4.1d93f04c.chunk.js","sourcesContent":["var debounce = require('./debounce'),\n    isObject = require('./isObject');\n/** Error message constants. */\n\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\n\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n/** Error message constants. */\n\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;","var root = require('./_root');\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\n\nvar now = function now() {\n  return root.Date.now();\n};\n\nmodule.exports = now;","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n/** Used as references for various `Number` constants. */\n\n\nvar NAN = 0 / 0;\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nmodule.exports = toNumber;","var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _class, _temp;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nvar AudioTrack = (_temp = _class = function (_Component) {\n  _inherits(AudioTrack, _Component);\n\n  function AudioTrack(props) {\n    _classCallCheck(this, AudioTrack);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.pauseAudio = function () {\n      if (_this.audio) _this.audio.pause();\n    };\n\n    _this.registerAudio = function (audio) {\n      _this.audio = audio;\n    };\n\n    _this.state = {\n      currentTime: props.currentTime,\n      isReady: false,\n      volume: props.volume\n    };\n    return _this;\n  }\n\n  AudioTrack.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.pauseAudio();\n    this.audio.addEventListener('canplaythrough', function () {\n      _this2.setState({\n        isReady: true\n      }, _this2.props.onReady);\n    });\n  };\n\n  AudioTrack.prototype.componentWillReceiveProps = function componentWillReceiveProps(_ref) {\n    var _this3 = this;\n\n    var currentTime = _ref.currentTime,\n        playing = _ref.playing,\n        playAudio = _ref.playAudio,\n        volume = _ref.volume;\n    if (!this.state.isReady) return;\n    this.audio.muted = !playAudio || false;\n\n    if (this.state.currentTime > currentTime) {\n      this.audio.currentTime = currentTime;\n    } else {\n      throttle(function () {\n        _this3.pauseAudio();\n\n        _this3.audio.currentTime = currentTime;\n\n        _this3.audio.play();\n      }, 100);\n    }\n\n    this.setState({\n      currentTime: currentTime,\n      volume: volume\n    });\n\n    if (playing && this.audio.paused) {\n      this.audio.play();\n    } else if (!playing) {\n      this.pauseAudio();\n    }\n\n    if (volume !== this.state.volume) {\n      this.audio.volume = volume;\n    }\n  };\n\n  AudioTrack.prototype.render = function render() {\n    var _props = this.props,\n        src = _props.src,\n        showControls = _props.showControls,\n        trackProps = _props.trackProps;\n    return React.createElement('audio', {\n      controls: showControls,\n      ref: this.registerAudio,\n      src: src\n    }, React.createElement('track', _extends({\n      kind: 'captions'\n    }, trackProps)));\n  };\n\n  return AudioTrack;\n}(Component), _class.defaultProps = {\n  currentTime: 0,\n  playing: false,\n  playAudio: false,\n  onReady: function onReady() {\n    return null;\n  },\n  showControls: false,\n  src: '',\n  trackProps: {},\n  volume: 0.5\n}, _temp);\nexport { AudioTrack as default };\nAudioTrack.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  currentTime: PropTypes.number,\n  onReady: PropTypes.func,\n  playing: PropTypes.bool,\n  playAudio: PropTypes.bool,\n  showControls: PropTypes.bool,\n  src: PropTypes.string,\n  trackProps: PropTypes.shape({\n    label: PropTypes.string\n  }),\n  volume: PropTypes.number\n} : {};","var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _temp, _initialiseProps;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AudioTrack from './AudioTrack';\nvar DEFAULT_FPS = 24;\n\nvar preloadImage = function preloadImage(src, callback) {\n  var img = new Image();\n\n  img.onload = function () {\n    return callback(img);\n  };\n\n  img.src = src;\n};\n\nvar Viewer = (_temp = _class = function (_Component) {\n  _inherits(Viewer, _Component);\n\n  function Viewer(props) {\n    _classCallCheck(this, Viewer);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var frames = props.frames;\n    _this.state = {\n      audioReady: false,\n      currentFrame: 0,\n      fps: props.fps,\n      loading: true,\n      isPlaying: false,\n      htmlImageElements: null,\n      playAudio: true,\n      volume: 0.5,\n      loadingProgress: {\n        loadingComplete: false,\n        totalLoaded: 0,\n        totalFramesToLoad: frames.length\n      }\n    };\n    window.onkeydown = _this.handleKeydown;\n    return _this;\n  }\n\n  Viewer.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    var frames = this.props.frames;\n\n    if (this.canvas) {\n      this.ctx = this.canvas.getContext('2d');\n    }\n\n    var htmlImageElements = [];\n    frames.forEach(function (frame, index) {\n      preloadImage(frame, function (img) {\n        _this2.setState({\n          loadingProgress: _extends({}, _this2.state.loadingProgress, {\n            totalLoaded: htmlImageElements.length\n          })\n        });\n\n        if (index === 0) {\n          _this2.framesSize = {\n            width: img.width,\n            height: img.height\n          };\n        } // ensure order is correct\n\n\n        htmlImageElements.splice(index, 0, img);\n\n        if (htmlImageElements.length === frames.length) {\n          _this2.setState({\n            loading: false,\n            htmlImageElements: htmlImageElements,\n            loadingProgress: _extends({}, _this2.state.loadingProgress, {\n              loadingComplete: true\n            })\n          }, _this2.drawFrame);\n        }\n      });\n    });\n  };\n\n  Viewer.prototype.componentWillUnmount = function componentWillUnmount() {\n    window.onkeydown = null;\n  };\n\n  Viewer.prototype.getNextFrame = function getNextFrame() {\n    var currentFrame = this.state.currentFrame;\n    var frames = this.props.frames;\n    if (currentFrame === frames.length - 1) return 0;\n    return currentFrame + 1;\n  };\n\n  Viewer.prototype.getPrevFrame = function getPrevFrame() {\n    var currentFrame = this.state.currentFrame;\n    var frames = this.props.frames;\n    if (currentFrame === 0) return frames.length - 1;\n    return currentFrame - 1;\n  };\n\n  Viewer.prototype.render = function render() {\n    var _this3 = this;\n\n    var currentAudioPosition = this.currentAudioPosition;\n\n    var _ref = this.state || {},\n        isPlaying = _ref.isPlaying,\n        fps = _ref.fps,\n        playAudio = _ref.playAudio,\n        volume = _ref.volume,\n        loadingProgress = _ref.loadingProgress;\n\n    var _props = this.props,\n        audioSource = _props.audioSource,\n        frames = _props.frames,\n        render = _props.render;\n    var renderAudio = playAudio && React.createElement(AudioTrack, {\n      src: audioSource,\n      playAudio: playAudio,\n      onReady: this.onAudioReady,\n      playing: isPlaying,\n      maxTime: frames.length / fps,\n      volume: volume,\n      showControls: true,\n      currentTime: this.currentAudioPosition\n    });\n    var getViewerProgressProps = this.getViewerProgressProps,\n        getViewerControlsProps = this.getViewerControlsProps;\n\n    var getCanvasRef = function getCanvasRef(el) {\n      _this3.canvas = el;\n    };\n\n    var renderViewer = React.createElement('canvas', {\n      ref: getCanvasRef\n    });\n    return render(_extends({}, this.state, {\n      getViewerProgressProps: getViewerProgressProps,\n      getViewerControlsProps: getViewerControlsProps,\n      loadingProgress: loadingProgress,\n      renderAudio: renderAudio,\n      renderViewer: renderViewer,\n      getCanvasRef: getCanvasRef,\n      currentAudioPosition: currentAudioPosition,\n      isPlaying: isPlaying\n    }));\n  };\n\n  _createClass(Viewer, [{\n    key: 'isLoading',\n    get: function get() {\n      return !this.state.audioReady && this.state.loading;\n    }\n  }, {\n    key: 'currentAudioPosition',\n    get: function get() {\n      var _state = this.state,\n          currentFrame = _state.currentFrame,\n          fps = _state.fps;\n      return currentFrame === 0 ? 0 : currentFrame / fps;\n    }\n  }]);\n\n  return Viewer;\n}(Component), _class.defaultProps = {\n  audioSource: '',\n  fps: DEFAULT_FPS\n}, _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onVolumeChange = function (volume) {\n    _this4.setState({\n      volume: volume\n    });\n  };\n\n  this.onAudioReady = function () {\n    _this4.setState({\n      audioReady: true\n    });\n  };\n\n  this.getViewerControlsProps = function () {\n    var pause = _this4.pause,\n        togglePlay = _this4.togglePlay,\n        toggleAudio = _this4.toggleAudio,\n        onVolumeChange = _this4.onVolumeChange;\n\n    var _ref2 = _this4.state || {},\n        currentFrame = _ref2.currentFrame,\n        isPlaying = _ref2.isPlaying,\n        fps = _ref2.fps,\n        playAudio = _ref2.playAudio,\n        volume = _ref2.volume;\n\n    return {\n      fps: fps,\n      loading: _this4.isLoading,\n      currentFrame: currentFrame,\n      isPlaying: isPlaying,\n      next: _this4.goToNextFrame,\n      prev: _this4.goToPrevFrame,\n      pause: pause,\n      playAudio: playAudio,\n      togglePlay: togglePlay,\n      toggleAudio: toggleAudio,\n      volume: volume,\n      onVolumeChange: onVolumeChange,\n      onFPSChange: function onFPSChange(fpsChange) {\n        return _this4.setState({\n          fps: parseInt(fpsChange, 10)\n        });\n      }\n    };\n  };\n\n  this.getViewerProgressProps = function () {\n    var _ref3 = _this4.state || {},\n        currentFrame = _ref3.currentFrame;\n\n    var frames = _this4.props.frames;\n    return {\n      min: 0,\n      max: frames.length - 1,\n      value: currentFrame,\n      onChange: _this4.goToFrame\n    };\n  };\n\n  this.goToFrame = function (currentFrame) {\n    _this4.setState({\n      currentFrame: currentFrame\n    }, _this4.drawFrame);\n  };\n\n  this.goToNextFrame = function () {\n    _this4.setState({\n      currentFrame: _this4.getNextFrame()\n    }, _this4.drawFrame);\n  };\n\n  this.goToPrevFrame = function () {\n    _this4.setState({\n      currentFrame: _this4.getPrevFrame()\n    }, _this4.drawFrame);\n  };\n\n  this.drawFrame = function () {\n    var _state2 = _this4.state,\n        currentFrame = _state2.currentFrame,\n        htmlImageElements = _state2.htmlImageElements;\n    if (!htmlImageElements) return;\n    var img = htmlImageElements[currentFrame];\n\n    if (_this4.canvas && _this4.ctx) {\n      _this4.canvas.width = img.width;\n      _this4.canvas.height = img.height;\n\n      _this4.ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);\n    }\n  };\n\n  this.pause = function () {\n    _this4.setState({\n      isPlaying: false\n    });\n  };\n\n  this.togglePlay = function () {\n    _this4.setState({\n      isPlaying: !_this4.state.isPlaying\n    }, function () {\n      if (!_this4.state.isPlaying) return;\n\n      _this4.play(_this4.renderNextFrame);\n    });\n  };\n\n  this.toggleAudio = function () {\n    _this4.setState({\n      playAudio: !_this4.state.playAudio\n    });\n  };\n\n  this.play = function (renderFrame) {\n    if (!_this4.state.isPlaying) return;\n    var then = performance.now();\n    var now = void 0;\n    var delta = void 0;\n\n    var nextFrame = function nextFrame() {\n      if (!_this4.state.isPlaying) return;\n      now = performance.now();\n      delta = now - then;\n      var interval = Math.round(1000 / _this4.state.fps);\n\n      if (delta > interval) {\n        renderFrame();\n        then = now;\n      }\n\n      requestAnimationFrame(nextFrame);\n    };\n\n    nextFrame();\n  };\n\n  this.handleKeydown = function (e) {\n    var LEFT_ARROW_KEY = 37;\n    var RIGHT_ARROW_KEY = 39;\n    var SPACEBAR_KEY = 32;\n    var key = e.which;\n\n    switch (key) {\n      case RIGHT_ARROW_KEY:\n        e.preventDefault();\n\n        _this4.goToNextFrame();\n\n        break;\n\n      case LEFT_ARROW_KEY:\n        e.preventDefault();\n\n        _this4.goToPrevFrame();\n\n        break;\n\n      case SPACEBAR_KEY:\n        e.preventDefault();\n\n        _this4.togglePlay();\n\n        break;\n\n      default:\n    }\n  };\n\n  this.renderNextFrame = function () {\n    if (!_this4.state.isPlaying) return;\n\n    _this4.setState({\n      currentFrame: _this4.getNextFrame()\n    }, _this4.drawFrame);\n  };\n}, _temp);\nexport { Viewer as default };\nViewer.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  audioSource: PropTypes.string,\n  fps: PropTypes.number,\n  frames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  render: PropTypes.func.isRequired\n} : {};","import React, { useEffect, useState, useReducer } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport Loader from 'shared/Loader';\nimport { useDropboxClient } from 'shared';\nimport CanvasImageScrubber from 'canvas-image-scrubber';\n\nfunction FolderPicker({ onSelectFolder, selectedFolderId }) {\n  const [folders, setFolders] = useState(null);\n  const { client } = useDropboxClient();\n\n  useEffect(() => {\n    async function listFiles() {\n      const result = await client.filesListFolder({\n        path: '',\n      });\n      const folders = result.entries.filter(\n        e => e['.tag'] === 'folder' && e.name !== 'images'\n      );\n      setFolders(folders);\n    }\n    listFiles();\n  }, []);\n\n  return folders === null ? (\n    <Loader />\n  ) : (\n    <select\n      onChange={({ target }) =>\n        onSelectFolder(folders.find(f => f.id === target.value))\n      }\n      value={selectedFolderId}\n    >\n      <option value={undefined}>\n        {' '}\n        -- select an animation folder or video file --{' '}\n      </option>\n      {folders.map(({ id, name }) => (\n        <option key={id} value={id}>\n          {name}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction useListFolderFiles(folder, onReceiveFolderFiles) {\n  const [files, setItems] = useState(null);\n  const { client } = useDropboxClient();\n\n  useEffect(\n    () => {\n      async function listFiles() {\n        const result = await client.filesListFolder({\n          path: folder.path_display,\n        });\n        const files = await Promise.all(\n          result.entries.map(async f => {\n            const file = await client.sharingCreateSharedLink({\n              path: f.path_display,\n            });\n            return {\n              ...f,\n              ...file,\n              index: parseInt(/\\d+/g.exec(f.name)[0], 10),\n              url: file.url.replace(/.$/, '1'),\n            };\n          })\n        );\n        const sortedFiles = files.sort((a, b) => a.index - b.index);\n        setItems(sortedFiles);\n      }\n      if (folder) listFiles();\n    },\n    [folder]\n  );\n\n  useEffect(\n    () => {\n      onReceiveFolderFiles(files);\n    },\n    [files]\n  );\n}\n\nconst reducer = (state, nextState) => ({ ...state, ...nextState });\n\nexport default function AnimationSection({\n  save,\n  selectedFolder: defaultSelectedFolder,\n  files: defaultFiles,\n  ...restProps\n}) {\n  const defaultSettings = {\n    selectedFolder: defaultSelectedFolder,\n    files: defaultFiles,\n  };\n  const [isSaveDisabled, setIsSaveDisabled] = useState(true);\n  const [settings, updateSettings] = useReducer(reducer, defaultSettings);\n  const { selectedFolder, files } = settings;\n  useListFolderFiles(selectedFolder || defaultSelectedFolder, files =>\n    updateSettings({ files })\n  );\n\n  useEffect(\n    () => {\n      setIsSaveDisabled(isEqual(defaultSettings, settings));\n    },\n    [settings]\n  );\n\n  return (\n    <div>\n      <FolderPicker\n        onSelectFolder={selectedFolder =>\n          updateSettings({ selectedFolder, files: null })\n        }\n        selectedFolderId={\n          selectedFolder ? selectedFolder.id : defaultSelectedFolder\n        }\n      />\n      {selectedFolder &&\n        (Array.isArray(files) ? (\n          <div>\n            <CanvasImageScrubber\n              frames={files.map(f => f.url)}\n              render={({ renderViewer }) => {\n                return <div>{renderViewer}</div>;\n              }}\n            />\n          </div>\n        ) : (\n          <Loader />\n        ))}\n      <button\n        disabled={isSaveDisabled}\n        onClick={() => save(settings)}\n        title={isSaveDisabled ? 'No changes to save' : null}\n      >\n        Save animation\n      </button>\n    </div>\n  );\n}\n"],"sourceRoot":""}